



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.3">
    
    
      
        <title>Using TShark & Wireshark to analyse SRT traffic - SRT CookBook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#using-tshark-wireshark-to-analyse-srt-traffic" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="SRT CookBook" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              SRT CookBook
            </span>
            <span class="md-header-nav__topic">
              
                Using TShark & Wireshark to analyse SRT traffic
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="SRT CookBook" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    SRT CookBook
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/" title="Projects and Applications with SRT support" class="md-nav__link">
      Projects and Applications with SRT support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/ffmpeg/" title="FFmpeg" class="md-nav__link">
      FFmpeg
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/gstreamer-plugin/" title="GStreamer" class="md-nav__link">
      GStreamer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/obs-studio/" title="OBS Studio" class="md-nav__link">
      OBS Studio
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/tsduck/" title="TSDuck" class="md-nav__link">
      TSDuck
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/vlc-media-player/" title="VLC Media Player" class="md-nav__link">
      VLC Media Player
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/wireshark/" title="Wireshark" class="md-nav__link">
      Wireshark
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Getting started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/build-on-windows/" title="Build on Windows" class="md-nav__link">
      Build on Windows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting-started/vcpkg-library-manager/" title="Vcpkg Library Manager" class="md-nav__link">
      Vcpkg Library Manager
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      How to articles
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        How to articles
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../how-to-setup-Azure-VM/" title="How to Setup Virtual Machine in Azure" class="md-nav__link">
      How to Setup Virtual Machine in Azure
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Using TShark & Wireshark to analyse SRT traffic
      </label>
    
    <a href="./" title="Using TShark & Wireshark to analyse SRT traffic" class="md-nav__link md-nav__link--active">
      Using TShark & Wireshark to analyse SRT traffic
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-tshark-wireshark-on-centos" class="md-nav__link">
    Installing TShark &amp; Wireshark on CentOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-tshark-wireshark-on-ubuntu-1804-lts" class="md-nav__link">
    Installing TShark &amp; Wireshark on Ubuntu 18.04 LTS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-tshark-wireshark-on-ubuntu-19" class="md-nav__link">
    Installing TShark &amp; Wireshark on Ubuntu 19+
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-tshark-wireshark-on-macos-and-windows" class="md-nav__link">
    Installing TShark &amp; Wireshark on MacOS and Windows
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-tshark-to-capture-network-traffic" class="md-nav__link">
    Using TShark to capture network traffic
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-macos" class="md-nav__link">
    Linux &amp; MacOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practice-tips" class="md-nav__link">
    Best practice tips
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analysing-the-pcapng-capture-file" class="md-nav__link">
    Analysing the .pcapng capture file
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lib-tcpdump-processing" class="md-nav__link">
    lib-tcpdump-processing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wireshark-gui" class="md-nav__link">
    Wireshark GUI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../how-to-simulate-networks-with-netem/" title="Using NetEm to Emulate Networks" class="md-nav__link">
      Using NetEm to Emulate Networks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../how-to-work-with-ssh-keys/" title="How to Work with SSH Keys" class="md-nav__link">
      How to Work with SSH Keys
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Protocol
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Protocol
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol/" title="The Protocol" class="md-nav__link">
      The Protocol
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol/bandwidth-estimation/" title="Bandwidth Estimation" class="md-nav__link">
      Bandwidth Estimation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol/events-and-timers/" title="Control Events and Timers" class="md-nav__link">
      Control Events and Timers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol/overhead/" title="SRT Protocol Overhead" class="md-nav__link">
      SRT Protocol Overhead
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol/threads/" title="Threads" class="md-nav__link">
      Threads
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-6" type="checkbox" id="nav-6-6">
    
    <label class="md-nav__link" for="nav-6-6">
      Congestion control
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-6">
        Congestion control
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol/congestion-control/" title="Congestion Control" class="md-nav__link">
      Congestion Control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol/congestion-control/file-cc/" title="File Congestion Control" class="md-nav__link">
      File Congestion Control
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7" type="checkbox" id="nav-6-7">
    
    <label class="md-nav__link" for="nav-6-7">
      Tsbpd
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-7">
        Tsbpd
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol/tsbpd/" title="TSBPD" class="md-nav__link">
      TSBPD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../protocol/tsbpd/latency/" title="SRT Latency" class="md-nav__link">
      SRT Latency
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-tshark-wireshark-on-centos" class="md-nav__link">
    Installing TShark &amp; Wireshark on CentOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-tshark-wireshark-on-ubuntu-1804-lts" class="md-nav__link">
    Installing TShark &amp; Wireshark on Ubuntu 18.04 LTS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-tshark-wireshark-on-ubuntu-19" class="md-nav__link">
    Installing TShark &amp; Wireshark on Ubuntu 19+
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-tshark-wireshark-on-macos-and-windows" class="md-nav__link">
    Installing TShark &amp; Wireshark on MacOS and Windows
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-tshark-to-capture-network-traffic" class="md-nav__link">
    Using TShark to capture network traffic
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-macos" class="md-nav__link">
    Linux &amp; MacOS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#best-practice-tips" class="md-nav__link">
    Best practice tips
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#analysing-the-pcapng-capture-file" class="md-nav__link">
    Analysing the .pcapng capture file
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lib-tcpdump-processing" class="md-nav__link">
    lib-tcpdump-processing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wireshark-gui" class="md-nav__link">
    Wireshark GUI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="using-tshark-wireshark-to-analyse-srt-traffic">Using TShark &amp; Wireshark to analyse SRT traffic</h1>
<p>Wireshark is a free and open-source packet analyzer. It is a very powerful tools to analyse network traffic, such as a connection.</p>
<p>Since version 3.0 Wireshark supports the SRT protocol and display filters can be applied to find particular elements of a SRT stream easily</p>
<p><em>TShark</em> is a terminal oriented version of  Wireshark designed for capturing and displaying packets when an  interactive user interface isn't necessary or available.</p>
<p>Both tools - TShark and Wireshark with GUI - can be used to create packet captures, which  are helpful to reproduce errors remotely or to feed other analysis tools such as <a href="https://github.com/mbakholdina/lib-tcpdump-processing">lib-tcpdump-processing</a>.</p>
<p>If you only want to capture files and do the analysis on a remote machine, installation of TShark is sufficient. </p>
<h2 id="installation">Installation</h2>
<h3 id="installing-tshark-wireshark-on-centos">Installing TShark &amp; Wireshark on CentOS</h3>
<p>TShark on CentOS is part of the CLI-version of Wireshark. To install use following command:</p>
<pre><code>sudo yum install wireshark
</code></pre>

<p>This will install tshark in <code>/usr/sbin/tshark</code> </p>
<p>To install Wireshark with GUI, do the following:</p>
<pre><code>sudo yum install wireshark-gnome
</code></pre>

<h3 id="installing-tshark-wireshark-on-ubuntu-1804-lts">Installing TShark &amp; Wireshark on Ubuntu 18.04 LTS</h3>
<p>Ubuntu 18.04 only provides Wireshark version 2.6, which has no native SRT support. To install the desired 3.0 or higher version, you could either build Wireshark yourself or follow the instructions from <a href="https://launchpad.net/~wireshark-dev/+archive/ubuntu/stable">launchpad</a> to get a binary package.</p>
<p>Basically you would add a Personal Package Archive (PPA) to your package repository with following 3 commands. For detailed instructions check the launchpad page at link above.</p>
<pre><code>sudo add-apt-repository ppa:wireshark-dev/stable
sudo apt-get update
sudo apt install wireshark tshark
</code></pre>

<p>To install the GUI version of Wireshark use following command after adding the PPA:</p>
<pre><code>sudo apt-get install wireshark-qt
</code></pre>

<h3 id="installing-tshark-wireshark-on-ubuntu-19">Installing TShark &amp; Wireshark on Ubuntu 19+</h3>
<p>Recent versions of Ubuntu serve version 3+ versions of TShark &amp; Wireshark.</p>
<pre><code>sudo apt-get update
sudo apt install wireshark tshark
</code></pre>

<p>To install the GUI version of Wireshark use following command:</p>
<pre><code>sudo apt-get install wireshark-qt
</code></pre>

<h3 id="installing-tshark-wireshark-on-macos-and-windows">Installing TShark &amp; Wireshark on MacOS and Windows</h3>
<p>Please download the Wireshark installer for MacOS or Windows directly from the <a href="https://www.wireshark.org/#download">Wireshark download site</a> and follow the instructions of the installer. TShark installation can be optionally selected (default is on).</p>
<h2 id="using-tshark-to-capture-network-traffic">Using TShark to capture network traffic</h2>
<p>In order to get best results for further analysis, the network capture should be started before the SRT connection is initiated. So we capture the SRT handshake as well, which can be useful later on.</p>
<h3 id="linux-macos">Linux &amp; MacOS</h3>
<p>Let's assume you are receiving a SRT stream on UDP port 4200 and want to capture it. First you want to make sure, that you are capturing the traffic on the right interface. If your system has multiple network interfaces you could use following command to list all available interfaces: (depending on your settings, you might need root privileges, which can be granted with <code>sudo</code>command)</p>
<p>Most Linux systems:</p>
<pre><code>sudo ip a
</code></pre>

<p>MacOS and some Linux systems:</p>
<pre><code>sudo ifconfig
</code></pre>

<p>Once you have identified the interface of your choice run following command: (some systems might need root priviliges to execute packet captures. Use <code>sudo</code>command then)</p>
<pre><code>tshark -i enp9s0 -f &quot;udp port 4200&quot; -s 1500 -w ./rcv-SRT.pcapng
</code></pre>

<ul>
<li><code>-i enp9s0</code>specifies the interface. Depending on your system this could also be <code>-i eth0</code> or  <code>-i eno1</code> or whatever the particular interface is named like</li>
<li><code>-f "udp port 4200"</code> specifies a filter rule to only capture UDP packets on port 4200</li>
<li><code>-s 1500</code> defines the snapshot length to capture, in this case 1500 bytes per packet</li>
<li><code>-w ./rcv-SRT.pcapng</code> sets the path and filename in which the captured data is written. In this case in the same directory that you are currently in with the file name <code>rcv-SRT.pcapng</code></li>
</ul>
<h3 id="windows">Windows</h3>
<p>The procedure on Windows is quite similar, however the naming conventions for the network adapters can be a confusing. </p>
<p>With following command you can found out IP addresses of your network interfaces:</p>
<pre><code>ipconfig /all
</code></pre>

<p>Note down the name of the <code>Ethernet adapter</code> of your choice with the correct IP address that you were looking for. In this example we are looking at <code>Ethernet adapter Local Area Connection 2:</code> Now point your shell (Terminal / PowerShell) to the Wireshark directory, which is per default: <code>c:\Program Files\Wireshark</code> and execute following command:</p>
<pre><code>tshark.exe -D
</code></pre>

<p>The option <code>-D</code> lists all interfaces, unfortunately without IP address. But we already identified the IP with the <code>ipconfig</code> command in the prior step. The output would give you something like this:</p>
<pre><code>c:\Program Files\Wireshark&gt;tshark.exe -D
1. \Device\NPF_{C4423365-7B46-493C-95E8-2F009A099E0A} (VMware Network Adapter VMnet8)
2. \Device\NPF_{78032B7E-4968-42D3-9F37-287EA86C0AAA} (Local Area Connection* 10)
3. \Device\NPF_{B9A7544E-73D8-4533-BC46-C3A2B99D68BF} (VirtualBox Host-Only Network)
4. \Device\NPF_NdisWanIp (NdisWan Adapter)
5. \Device\NPF_{A0B05D56-015A-4045-832F-E244BC32F9DC} (Local Area Connection)
6. \Device\NPF_NdisWanBh (NdisWan Adapter)
7. \Device\NPF_NdisWanIpv6 (NdisWan Adapter)
8. \Device\NPF_{03564282-7495-4FB5-98A2-CF349E10BE23} (Local Area Connection 2)
9. \Device\NPF_{663F8BBF-7C41-494B-B2BA-269DA97B8B49} (VMware Network Adapter VMnet1)
10. \Device\NPF_{3556DA2E-DEC6-410B-B791-E82CC8ABF216} (Local Area Connection 10)
11. \Device\NPF_Loopback (Adapter for loopback traffic capture)
12. \Device\NPF_{1949D5F2-F562-4C4E-8665-EABC55BFBFFC} (Local Area Connection 4)
13. \Device\NPF_{F4A0A87F-5DB3-42E5-A29E-C061045C1E99} (Local Area Connection 11)
</code></pre>

<p>The adapter of our choice in this example ( <code>Ethernet adapter Local Area Connection 2</code> ) has the <code>ID 8</code>.</p>
<p>Finally we can use the <code>ID 8</code> to perform the network capture by issuing following command:</p>
<pre><code>tshark.exe -i 8 -f &quot;udp port 4200&quot; -s 1500 -w c:\temp\rcv-SRT.pcapng
</code></pre>

<h3 id="best-practice-tips">Best practice tips</h3>
<ul>
<li>
<p>start the capture before starting the SRT transmission</p>
</li>
<li>
<p>name the .pcapng files in a way, which gives you a clue later on. For example use <code>rcv</code> or <code>snd</code> in filename and maybe something like <code>testrun-1</code> or other identifiers, which help to understand what you did later on</p>
</li>
<li>
<p>on Linux and MacOS you can specify a particular length of time to run the capture with help of <code>timeout</code> command. For example use following command to capture 30 seconds of traffic</p>
</li>
</ul>
<p><code>sudo timeout 30 tshark -i enp9s0 -f "udp port 4900" -s 1500 -w ./rcv-SRT.pcapng</code></p>
<ul>
<li>
<p>to stop a capture without <code>timeout</code> given just use the keyboard command <code>CTRL + C</code></p>
</li>
<li>
<p>timeout on Windows works a bit different. To perform a 30 second capture you can use: </p>
</li>
</ul>
<p><code>start "" app.exe &amp; timeout /t 30 &amp; taskkill /im app.exe /f</code></p>
<p>for our example this would result in:</p>
<p><code>start "" tshark.exe -i 8 -f "udp port 4200" -s 1500 -w c:\temp\rcv-SRT.pcapng &amp; timeout 30 &amp; taskkill /im tshark.exe /f</code></p>
<h2 id="analysing-the-pcapng-capture-file">Analysing the .pcapng capture file</h2>
<h3 id="lib-tcpdump-processing">lib-tcpdump-processing</h3>
<p>Specifically for network captures of SRT streams you can use the python scripts out of the library <a href="https://github.com/mbakholdina/lib-tcpdump-processing">lib-tcpdump-processing</a> provided by Maria Sharabayko. It's a great set of tools to analyse details of an SRT stream and get details quickly. </p>
<p>Example output of the <code>get-traffic-stats</code> script:</p>
<pre><code>Overall UDP rate:          7.501 Mbps
SRT Data org+rexmit pld:   7.367 Mbps
SRT Data org payload:      6.665 Mbps
SRT Data overhead:         1.824%
SRT Data missing:          0.000%
SRT Data rexmit overhead:  10.723%
SRT ACK overhead:          0.286%
SRT ACKACK overhead:       0.286%
SRT NAK overhead:          0.162%
===========================================
SRT overall overhead:       11.325%
SRT Data packets (org):     19913
SRT retransmitted:          719 packets (2097 retransmissions)
SRT DATA retransmisions:    10.531% × DATA packets
SRT retransmitted:          3.611% of original packets
    including retransmitted:
    once:    0.015% of original packets
    twice:   0.291% of original packets
    3×:      3.284% of original packets
    4×:      0.020% of original packets
    more:    0.000% of original packets
</code></pre>

<p>For further documentation and examples please visit the website: <a href="https://github.com/mbakholdina/lib-tcpdump-processing">lib-tcpdump-processing</a></p>
<h3 id="wireshark-gui">Wireshark GUI</h3>
<p>Before you can get started with analysing SRT in the Wireshark GUI, you need to uncheck interpretation of <code>UDT</code> packets in Wireshark. To do that, click on <code>Analyse</code> in the menu bar on top and select <code>Enabled Protocols</code> from the dropdown menu. (keyboard shortcut: <code>CTRL+SHIFT+E</code>).</p>
<p>Now search for <code>UDT</code> and uncheck the UDT-options which are displayed like shown in picture below.</p>
<p><img alt="./img/wireshark-udt.png" src="../img/wireshark-udt.png" /></p>
<p>Now you can import your captured .pcapng file or start a live capture from inside the Wireshark GUI.</p>
<p>A list of possible "display filters" for the SRT protocol can be found at the <a href="https://www.wireshark.org/docs/dfref/s/srt.html">Wireshark SRT Display Filter Reference page</a>.</p>
<p>There are cases when Wireshark will not pass the remainder of the UDP packet to sub-dissectors.
SRT is a sub-dissector of UDP.
This case is in the <code>decode_udp_ports</code> function of Wireshark, and has the following comment description:</p>
<pre><code>Do lookups with the subdissector table.
We try the port number with the lower value first, followed by the
port number with the higher value.  This means that, for packets
where a dissector is registered for both port numbers:

   1) we pick the same dissector for traffic going in both directions;

   2) we prefer the port number that's more likely to be the right
      one (as that prefers well-known ports to reserved ports);

although there is, of course, no guarantee that any such strategy
will always pick the right port number.

XXX - we ignore port numbers of 0, as some dissectors use a port
number of 0 to disable the port, and as RFC 768 says that the source
port in UDP datagrams is optional and is 0 if not used.
</code></pre>

<p>:exclamation: Wireshark offers a workaround for this. You have to set the following advanced option:
<code>Edit -&gt; Preferences -&gt; Advanced: udp.try_heuristic_first = TRUE</code>.
This will make a UDP packet to be passes to sub-dissectors first.</p>
<p><img alt="./img/wireshark-heuristic.png" src="../img/wireshark-heuristic.png" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../how-to-setup-Azure-VM/" title="How to Setup Virtual Machine in Azure" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How to Setup Virtual Machine in Azure
              </span>
            </div>
          </a>
        
        
          <a href="../how-to-simulate-networks-with-netem/" title="Using NetEm to Emulate Networks" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Using NetEm to Emulate Networks
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.ac79c3b0.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>