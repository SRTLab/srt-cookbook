
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.8">
    
    
      
        <title>Control Events and Timers - SRT CookBook</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#control-events-and-timers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="SRT CookBook" class="md-header__button md-logo" aria-label="SRT CookBook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SRT CookBook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Control Events and Timers
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/SRTLab/srt-cookbook/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="SRT CookBook" class="md-nav__button md-logo" aria-label="SRT CookBook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    SRT CookBook
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/SRTLab/srt-cookbook/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq.html" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Apps
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Apps" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Apps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../apps/index.html" class="md-nav__link">
        Projects and Applications with SRT support
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../apps/ffmpeg.html" class="md-nav__link">
        FFmpeg
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../apps/gstreamer-plugin.html" class="md-nav__link">
        GStreamer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../apps/obs-studio.html" class="md-nav__link">
        OBS Studio
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../apps/tsduck.html" class="md-nav__link">
        TSDuck
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../apps/vlc-media-player.html" class="md-nav__link">
        VLC Media Player
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../apps/wireshark.html" class="md-nav__link">
        Wireshark
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Getting started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/build-on-windows.html" class="md-nav__link">
        Build on Windows
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/vcpkg-library-manager.html" class="md-nav__link">
        Vcpkg Library Manager
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        How to articles
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="How to articles" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          How to articles
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-articles/how-to-setup-Azure-VM.html" class="md-nav__link">
        How to Setup Virtual Machine in Azure
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-articles/how-to-setup-wireshark-for-srt-traffic-analysis.html" class="md-nav__link">
        Using TShark & Wireshark to analyse SRT traffic
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-articles/how-to-simulate-networks-with-netem.html" class="md-nav__link">
        Using NetEm to Emulate Networks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-articles/how-to-work-with-ssh-keys.html" class="md-nav__link">
        How to Work with SSH Keys
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        Protocol
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Protocol" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Protocol
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        The Protocol
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="bandwidth-estimation.html" class="md-nav__link">
        Bandwidth Estimation
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Control Events and Timers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="events-and-timers.html" class="md-nav__link md-nav__link--active">
        Control Events and Timers
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#timers" class="md-nav__link">
    Timers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connection-expiration" class="md-nav__link">
    Connection Expiration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acknowledgement-messages" class="md-nav__link">
    Acknowledgement Messages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keepalive-messages" class="md-nav__link">
    Keepalive Messages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nak-reports-sent-by-receiver" class="md-nav__link">
    NAK Reports Sent by Receiver
  </a>
  
    <nav class="md-nav" aria-label="NAK Reports Sent by Receiver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#triggered-by-loss-detection" class="md-nav__link">
    Triggered by Loss Detection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggered-by-periodic-nak-reports" class="md-nav__link">
    Triggered by Periodic NAK Reports
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packet-retransmission-sender" class="md-nav__link">
    Packet Retransmission (Sender)
  </a>
  
    <nav class="md-nav" aria-label="Packet Retransmission (Sender)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#retransmission-triggered-by-nak-report" class="md-nav__link">
    Retransmission Triggered by NAK Report
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blind-retransmission" class="md-nav__link">
    Blind Retransmission
  </a>
  
    <nav class="md-nav" aria-label="Blind Retransmission">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fast-retransmission-fastrexmit" class="md-nav__link">
    Fast Retransmission (FASTREXMIT)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#late-retransmission-laterexmit" class="md-nav__link">
    Late Retransmission (LATEREXMIT)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="overhead.html" class="md-nav__link">
        SRT Protocol Overhead
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="threads.html" class="md-nav__link">
        Threads
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_6" type="checkbox" id="__nav_6_6" >
      
      <label class="md-nav__link" for="__nav_6_6">
        Congestion control
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Congestion control" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_6">
          <span class="md-nav__icon md-icon"></span>
          Congestion control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="congestion-control/index.html" class="md-nav__link">
        Congestion Control
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="congestion-control/file-cc.html" class="md-nav__link">
        File Congestion Control
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_7" type="checkbox" id="__nav_6_7" >
      
      <label class="md-nav__link" for="__nav_6_7">
        Tsbpd
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tsbpd" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_7">
          <span class="md-nav__icon md-icon"></span>
          Tsbpd
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="tsbpd/index.html" class="md-nav__link">
        TSBPD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tsbpd/latency-negotiation.html" class="md-nav__link">
        Latency Negotiation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="tsbpd/latency.html" class="md-nav__link">
        SRT Latency
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#timers" class="md-nav__link">
    Timers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connection-expiration" class="md-nav__link">
    Connection Expiration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acknowledgement-messages" class="md-nav__link">
    Acknowledgement Messages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keepalive-messages" class="md-nav__link">
    Keepalive Messages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nak-reports-sent-by-receiver" class="md-nav__link">
    NAK Reports Sent by Receiver
  </a>
  
    <nav class="md-nav" aria-label="NAK Reports Sent by Receiver">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#triggered-by-loss-detection" class="md-nav__link">
    Triggered by Loss Detection
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#triggered-by-periodic-nak-reports" class="md-nav__link">
    Triggered by Periodic NAK Reports
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packet-retransmission-sender" class="md-nav__link">
    Packet Retransmission (Sender)
  </a>
  
    <nav class="md-nav" aria-label="Packet Retransmission (Sender)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#retransmission-triggered-by-nak-report" class="md-nav__link">
    Retransmission Triggered by NAK Report
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blind-retransmission" class="md-nav__link">
    Blind Retransmission
  </a>
  
    <nav class="md-nav" aria-label="Blind Retransmission">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fast-retransmission-fastrexmit" class="md-nav__link">
    Fast Retransmission (FASTREXMIT)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#late-retransmission-laterexmit" class="md-nav__link">
    Late Retransmission (LATEREXMIT)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/SRTLab/srt-cookbook/blob/master/docs/protocol/events-and-timers.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="control-events-and-timers">Control Events and Timers</h1>
<h2 id="timers">Timers</h2>
<ol>
<li>
<p><strong>LastRSP</strong> time is updated when SRT socket is created, when a connection is established (since SRT v1.3.3, PR <a href="https://github.com/Haivision/srt/pull/745">#745</a>), upon receiving a control or data packet.</p>
</li>
<li>
<p><strong>LastRspAck</strong> time is updated when SRT socket is created, when a connection is established (since SRT v1.3.3, PR <a href="https://github.com/Haivision/srt/pull/745">#745</a>), an ACK packet for yet unacknowledged packet is received, and also if the sender's buffer has no unacknowledged packets on the new data submitted by <em>srt_sendmsg()</em>.</p>
</li>
<li>
<p><strong>LastSND</strong> timer is updated when SRT socket is created, when a connection is established (since SRT v1.3.3, PR <a href="https://github.com/Haivision/srt/pull/745">#745</a>), when a control or data packet is sent. A special update happens when a handshake message is sent in response to incomming handshare packet (this does not happen via sendCtrl()). The value is used to trigger sending a KEEPALIVE message. See Sec. Keepalive Messages.</p>
</li>
<li>
<p><strong>NextACK</strong> time.</p>
</li>
<li>
<p><strong>NextNAK</strong> time.</p>
</li>
<li>
<p><strong>TargetSND</strong> time (TargetTime - rename in source code?) is used in the sender only for rate-based packet sending. In UDT draft referred to as SND timer.</p>
</li>
</ol>
<h2 id="events">Events</h2>
<p>SRT has different events: ACK, NAK, EXP, SND and RSP. Each event has its own period and they are all independent. They use the system time as origins and should process wrapping if the system time wraps.</p>
<p>For a certain periodical event E in SRT, suppose the time variable is ET and its period is p. If E is set or reset at system time t0 (ET = t0), then at any time t1, (t1 - ET &gt;= p) is the condition to check if E should be triggered.</p>
<ol>
<li>
<p><strong>ACK</strong> is used to trigger an acknowledgment (ACK). Its period is set by the congestion control module, otherwise the default value of 10 ms is used (COMM_SYN_INTERVAL or SYN time). However, SRT will send an ACK no longer than every 0.01 second, even though the congestion control does not need timer-based ACK. Here, 0.01 second is defined as the SYN time, or synchronization time, and it affects many of the other timers used in SRT.</p>
</li>
<li>
<p><strong>NAK</strong> is used to trigger a negative acknowledgment (NAK). Its period is dynamically updated to RTT + 4 × RTTVar + SYN, where RTTVar is the variance of RTT samples.</p>
</li>
<li>
<p><strong>EXP</strong> is used to trigger data packets retransmission and maintain connection status. Its period is dynamically updated to N × (RTT + 4 × RTTVar + SYN), where N is the number of continuous timeouts. To avoid unnecessary timeout, a minimum threshold (e.g., 0.5 second) should be used in the implementation.</p>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">UDT: 4 × RTT + RTTVar</p>
<p>Note that 4 × RTT + RTTVar + SYN is described in the <a href="https://tools.ietf.org/html/draft-gg-udt-03#page-8">UDT draft</a> (Timers section). However, the formula actually used in the UDT v4 source code is RTT + 4 × RTTVar + SYN, which is also used in the SRT (as of v1.3.2). UDT v3 just uses 1 sec timeout.</p>
</div>
<p>In the rest of this document, a name of a time variable will be used to represent the associated event, the variable itself, or the value of its period, depending on the context. For example, ACK can mean either the ACK event or the value of ACK period.</p>
<h2 id="connection-expiration">Connection Expiration</h2>
<p>Default 5 seconds. Can be configured by SRTO_PEERIDLETIMEO.</p>
<div class="admonition todo">
<p class="admonition-title">TODO: Add details</p>
<p>Describe in more details, as it relies on several timers.</p>
</div>
<p>EXP Event Processing (Currently just copied from UDT draft).</p>
<ol>
<li>Put all the unacknowledged packets into the sender's loss list.</li>
<li>If (ExpCount &gt; 16) and at least 3 seconds has elapsed since that last time when ExpCount is reset to 1, or, 3 minutes has elapsed, close the UDT connection and exit.</li>
<li>If the sender's loss list is empty, send a keep-alive packet to the peer side.</li>
<li>Increase ExpCount by 1.</li>
</ol>
<h2 id="acknowledgement-messages">Acknowledgement Messages</h2>
<p>There are several types of ACK packets: lite ACK, small ACK and full ACK.</p>
<p><img alt="" src="srt_ACK_packet.png" /></p>
<p>The default <strong>ACK interval</strong> <code>ACKInt</code> is <strong>10 ms</strong> (<code>CUDT::m_ullACKInt_tk</code>). The Congestion Control module can specify a custom ACK interval by overriding the <code>SrtCongestionControlBase::ACKIntervalMicrosec()</code>.
Neither LiveCC, nor FileCC specify this value.</p>
<p><strong><em>NextACK</em></strong> time is set to <code>tcur + ACKInt</code> at the start when SRT socket is created and updated when a connection is established (since SRT v1.3.3, PR <a href="https://github.com/Haivision/srt/pull/745">#745</a>).
The value is updated on every ACK packet sent as <code>NextACK =</code> <code>tcur + ACKInt,</code>where <code>ACKInt = CC::ACKIntµs</code> ? <code>CC::ACKIntµs</code> : <code>CUDT::ACKInt.</code></p>
<p>ACK packet is sent if <code>tcur &gt; NextACK or</code> if <code>Pktsrcvd &gt;= CC::ACKIntpkts, where CC::ACKIntpkts</code>is specified by the Congestion Control. Neither LiveCC, nor FileCC specify this value.</p>
<p>Congestion control can also schedule sending the ACK by setting <code>NextACK = tcur</code> if CC::needsQuickACK() returns true. By default LiveCC returns false, and FileCC returns true if the payload size is less than the maximum size (end of file detection).</p>
<p>A lite ACK is sent if <code>Pktsrcvd &gt;= 64 (CC::</code>SELF_CLOCK_INTERVAL).</p>
<p>A full ACK is sent if <code>tcur ACKLast &gt; ACKInt. Otherwise a small ACK is sent.</code></p>
<p>ACK for the same sequence may be sent again if tcur - ACKLast &gt;= RTT + 4 × RTTVar (see CUDT::sendCtrl()).</p>
<h2 id="keepalive-messages">Keepalive Messages</h2>
<p>Keepalive messages in SRT are sent based on the LAST_SND timer. LAST_SND timer is updated by the latest control or data packet sent. A KEEPALIVE message is sent if t &gt;= LAST_SND + KEEPALIVE_PERIOD, where KEEPALIVE_PERIOD = 1 sec.</p>
<p>Keepalive messages in UDT are sent based on the EXP timer. EXP event is triggered at t &gt;= N × (RTT + 4 × RTTVar + SYN), where N is the number of continuous timeouts. If N &gt;= 16, the connection is closed. Otherwise if the senders buffer has unacknowledged packets, they are considered lost, added to the lost list, thus scheduled for retransmission. If the sender's buffer has no unacknowledged packets, a KEEPALIVE control packet is sent.It can be calculated, that for an idle connection a KEEPALIVE is sent every RTT + 4 × RTTVar + SYN.</p>
<hr />
<h2 id="nak-reports-sent-by-receiver">NAK Reports Sent by Receiver</h2>
<p>A negative acknowledgment (NAK) report is special SRT control packet, sent by the receiver back to the sender. The packet holds compressed sequence numbers of packets considered lost by the receiver.</p>
<p>There are two possibilities for the receiver to report a loss back to the sender.</p>
<h3 id="triggered-by-loss-detection">Triggered by Loss Detection</h3>
<p>Loss detection is based on Gaps in Sequence Numbers. Detection of a packet loss is triggered with the newly received packet.</p>
<p>An offset between the newly arrived packet and the last acknowledged position is calculated. In case the offset is negative, the packet is considered belated, meaning that it was either already acknowledged or dropped by TSBPD as too late to be delivered. Such belated packets are ignored.</p>
<p>Documentation states the retransmitted packet is not considered belated</p>
<p>Check statistics handling any packets after receiver ACK as belated, regardless of the retransmit flag. Should the re-transmitted packets be ignored?</p>
<p>An offset between sequence numbers of the arrived packet and the previously received packet is calculated. If the packet is not the next packet in order, then a loss detection mechanism is triggered.</p>
<p>First, a gap in sequence numbers of the consecutively received packets might be due to packet reordering. Sequence numbers that should fill the gap are added to the <strong><em>RcvLossList</em></strong> of a socket.</p>
<p>Then there is a decision whether a loss report should be sent. A non-zero reorder tolerance (ReorderTolerance &lt;= MaxReorderTolerance) determines if a gap in sequence numbers is allowed. The default value of MaxReorderTolerance is zero, and it can be set with SRTO_LOSSMAXTTL socket option.</p>
<p>If ReorderTolerance==0, a loss report is sent immediately for the detected gap.</p>
<p>Otherwise, if ReorderTolerance&gt;0, then the detected gap is added to a temporal loss list, with a TTL value equal to current ReorderTolerance value. Each time a DATA packet is received, TTTL of every lost packet in this temporal loss list is decremented by 1. Those packets </p>
<ul>
<li><strong>TODO:</strong> Describe ReorderTolerance update logic</li>
</ul>
<p>Example from <em><a href="http://haivision.jira.com/wiki/spaces/SAS/pages/100401649/SRT+Periodic+NAK+Reports">SRT Periodic NAK Reports</a></em> showing how a serial loss will be treated.</p>
<pre><code>    Packets in Transit   |     Receive Buffer
                         | 
                         |                 Largest sequence number received (4)
                         |     New      /
    +---+     +---+      |     +---+   +---+---+---+---+---+---+ 
--- | 9 | --- | 8 | ---&gt; | ---&gt;| 7 | + | _ | _ | 4 | 3 | _ | 1 | ---&gt;
    +---+     +---+      |     +---+ | +---+---+---+---+---+---+ 
                         |           |  \_____/         \_/ 
         +---+           |     +---+ |     \____________/
    &lt;--- |NAK|      &lt;--- | &lt;---|NAK|-+    Missing packets 
         | 2 |           |     |5,6| 
         +---+           |     +---+
</code></pre>
<h3 id="triggered-by-periodic-nak-reports">Triggered by Periodic NAK Reports</h3>
<p><em>See also <a href="http://haivision.jira.com/wiki/spaces/SAS/pages/100401649/SRT+Periodic+NAK+Reports">SRT Periodic NAK Reports</a>.</em></p>
<p>By default periodic NAK reports are enabled in live mode (SRTO_TRANSTYPE = SRTT_LIVE), and disabled in file mode (SRTO_TRANSTYPE = SRTT_FILE). The functionality is controlled by SRTO_NAKREPORT socket option.</p>
<p><strong><em>NAKtime</em></strong> is the time to send the next periodic NAK report. When <strong><em>t &gt;= NAKtime</em></strong> and the <strong><em>RcvLossList</em></strong> is not empty, a periodic NAK report is sent. This report includes all the packets in the receiver's loss list (<strong><em>RcvLossList</em></strong>).</p>
<pre><code> |               Receive Buffer 
 |        
 |           Largest sequence number received (7) 
 |          / 
 |           +---+---+---+---+---+---+---+ 
 |       ---&gt;| 7 | _ | _ | 4 | 3 | _ | 1 | ---&gt;
 |           +---+---+---+---+---+---+---+
 |           |    \_____/         \_/ 
 |   +-----+ |       \____________/ 
 | &lt;-| NAK |-+       Missing packets 
 |   |2,5,6| 
 |   +-----+
</code></pre>
<p><strong><em>NAKtime</em></strong> is first initialized when a socket is created, and updated after a connection is established (since SRT v1.3.3, PR <a href="https://github.com/Haivision/srt/pull/745">#745</a>). Regularly <strong><em>NAKtime</em></strong> is updated with the last time a <strong>periodic</strong> NAK report was sent: <strong><em>NAKtime</em></strong> <strong><em>= t +</em></strong> <strong><em>NAKInt</em></strong>.</p>
<ul>
<li><strong>ISSUE</strong> <a href="https://github.com/Haivision/srt/issues/701">#701</a>. NAK time is updated after sending the periodic NAK report. Should be also updated after sending a regular LOSS report? Or at least update the time if there are no losses in the <strong>*RcvLossList*</strong>.</li>
</ul>
<p>where <strong><em>NAKInt</em></strong> is an interval between periodic NAK reports. Minimum NAK interval is <strong><em>NAKIntmin=300</em></strong> ms, and it is set at the very beginning of the streaming.</p>
<p>NAK interval <strong><em>NAKInt</em></strong> is updated after sending a loss report. The new value is <strong><em>NAKInt</em></strong> <strong><em>= RTT + 4 × RTTVar</em></strong>. This value is passed to the CC module.</p>
<ul>
<li><strong>FileCC</strong> can update NAKInt  based on the reported receiving speed Rrcv (packets per second) and the length of the loss list LOSSlen: NAKInt = RTT + 4 × RTTVar + LOSSlen × 106 /  Rrcv.</li>
<li><strong>LiveCC</strong> will update NAKInt  by dividing it by 2: LOSSlen: NAKInt = (RTT + 4 × RTTVar) / 2.</li>
</ul>
<p>The minimum value is NAKInt = max(NAKInt, NAKIntmin).</p>
<p>NAKtime is a time to send the next periodic NAK report. The time is initialized at <code>CUDT::open()</code> and after a connection is established (PR <a href="https://github.com/Haivision/srt/pull/745">#745</a>).
NAKtime is updated with the last time a <strong>periodic</strong> NAK report was sent.</p>
<ul>
<li><strong>ISSUE</strong> <a href="https://github.com/Haivision/srt/issues/701">#701</a>. NAK time is updated after sending the periodic NAK report. Should be also updated after sending a regular LOSS report?</li>
</ul>
<p>When t &gt;= NAKtime and the <strong><em>RcvLossList</em></strong> is not empty, a periodic NAK report is sent. This report includes all the packets in the receiver's loss list (<strong><em>RcvLossList</em></strong>).</p>
<hr />
<h2 id="packet-retransmission-sender">Packet Retransmission (Sender)</h2>
<h3 id="retransmission-triggered-by-nak-report">Retransmission Triggered by NAK Report</h3>
<p>A packet is scheduled for retransmission if a sender receives a NAK report from the receiver. A loss report may be triggered either by loss detection, or by periodic NAK reports (see NAK Reports section above).</p>
<h3 id="blind-retransmission">Blind Retransmission</h3>
<p>A blind retransmission is an heuristic mechanism of a sender to trigger packet retransmission without receiving a NAK report from the receiver.</p>
<h4 id="fast-retransmission-fastrexmit">Fast Retransmission (FASTREXMIT)</h4>
<p>FASTREXMIT mode is enabled by LiveCC when the receiver is not expected to send periodic NAK reports. A condition is triggered based on the <strong><em>LastRspAck</em></strong> time.</p>
<p>Timer-triggered condition: t &gt; N × (RTT + 4 × RTTVar + 2 × SYN) + SYN, where SYN=10 ms, and N is a number of such retransmissions since last ACK (also reset if the sender's buffer has no unacknowledged packets on the new data submitted by srt_sendmsg).</p>
<p>All unacknowledged packets in the sender's buffer are added to the SndLossList and scheduled for retransmission.</p>
<p>FASTREXMIT is not present in UDT.</p>
<h4 id="late-retransmission-laterexmit">Late Retransmission (LATEREXMIT)</h4>
<div class="admonition todo">
<p class="admonition-title">TODO: User-defined RTT</p>
<p>Describe a scenario with a user-defined RTO value.</p>
</div>
<p>The LATEREXMIT is the default blind retransmission mode of UDT. LATEREXMIT is triggered by the EXP timer.</p>
<p>EXP timer in UDT is used to trigger data packets retransmission and maintain connection status. Its period is dynamically updated to N × (RTT + 4 × RTTVar + SYN), where N is the number of continuous timeouts. To avoid unnecessary timeout, a minimum threshold (e.g., 0.5 second) is used in the implementation.</p>
<p>Each time EXP timer is triggered, resend unacknowledged packets currently in the sender's buffer if there are some, otherwise send a KEEPALIVE message.</p>
<p>In SRT v1.3.2 and earlier the logic is the same, except that a KEEPALIVE message has its own timer and a timeout of 1 second (see keepalive section above).</p>
<ul>
<li><strong>TODO:</strong> Check if excessive KEEPALIVE messages are sent after a retransmission is scheduled.</li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="bandwidth-estimation.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Bandwidth Estimation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Bandwidth Estimation
            </div>
          </div>
        </a>
      
      
        
        <a href="overhead.html" class="md-footer__link md-footer__link--next" aria-label="Next: SRT Protocol Overhead" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              SRT Protocol Overhead
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.76f349be.min.js"></script>
      
    
  </body>
</html>